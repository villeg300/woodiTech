{% extends 'base.html' %}
{% block content %}
<div class="container" style="max-width:400px;margin:40px auto;padding:24px;background:#fff;border-radius:18px;box-shadow:0 2px 16px 0 rgba(25,25,137,0.08);">
    <h2 style="color:#191989;text-align:center;margin-bottom:24px;">Réinitialisation du mot de passe</h2>
    {% if errors.non_field %}
        <div style="background:#ffeaea;color:#d32f2f;padding:10px 14px;border-radius:8px;margin-bottom:12px;text-align:center;">{{ errors.non_field }}</div>
    {% endif %}
    {% if token_valid %}
    <form method="post" style="display:flex;flex-direction:column;gap:18px;">
        {% csrf_token %}
        <div>
            <label for="new_password1" style="font-weight:500;">Nouveau mot de passe</label>
            <input type="password" id="new_password1" name="new_password1" class="form-control" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;" required>
            {% if errors.new_password1 %}
                <div style="color:#d32f2f;font-size:0.95em;margin-top:4px;">{{ errors.new_password1 }}</div>
            {% endif %}
        </div>
        <div>
            <label for="new_password2" style="font-weight:500;">Confirmer le mot de passe</label>
            <input type="password" id="new_password2" name="new_password2" class="form-control" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;" required>
            {% if errors.new_password2 %}
                <div style="color:#d32f2f;font-size:0.95em;margin-top:4px;">{{ errors.new_password2 }}</div>
            {% endif %}
        </div>
        <button type="submit" style="background:#191989;color:#fff;font-weight:600;padding:12px 0;border:none;border-radius:8px;width:100%;font-size:1.1em;">Réinitialiser</button>
    </form>
    {% else %}
        <div style="background:#fffbe6;color:#b26a00;padding:10px 14px;border-radius:8px;margin-top:24px;text-align:center;">Ce lien n'est plus valide. <a href="{% url 'forgot_password' %}" style="color:#191989;font-weight:500;">Refaire une demande</a>.</div>
    {% endif %}
</div>
<style>
@media (max-width: 600px) {
  .container {padding:12px;max-width:98vw;}
  h2 {font-size:1.3em;}
}
</style>
{% endblock %}
